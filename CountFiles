import java.io.*;

public class CountFiles {
    public static void main(String[] args) throws IOException {
        String[] directories = {"Programmers_Algorithm", "BaekJoon_Algorithm"};
        File readme = new File("README.md");
        StringBuilder newReadme = new StringBuilder();

        for (String directory : directories) {
            int fileCount = countFilesInDirectory(new File(directory));
            updateReadmeContent(newReadme, directory, fileCount);
        }

        writeFile(readme, newReadme.toString());
    }

    private static int countFilesInDirectory(File directory) {
        File[] files = directory.listFiles();
        int count = 0;

        if (files != null) {
            for (File file : files) {
                if (file.isDirectory()) {
                    count += countFilesInDirectory(file);
                } else {
                    count++;
                }
            }
        }

        return count;
    }

    private static void updateReadmeContent(StringBuilder content, String directory, int fileCount) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader("README.md"));
        String line;
        boolean updated = false;

        while ((line = br.readLine()) != null) {
            if (line.startsWith(directory)) {
                line = directory + " : " + fileCount + "개";
                updated = true;
            }
            content.append(line).append("\n");
        }

        if (!updated) {
            content.append(directory).append(" : ").append(fileCount).append("개\n");
        }

        br.close();
    }

    private static void writeFile(File file, String content) throws IOException {
        FileWriter writer = new FileWriter(file);
        writer.write(content);
        writer.close();
    }
}
